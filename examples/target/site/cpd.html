<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Sep 8, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Mahout Examples - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20120908" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Mahout Examples
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2012-09-08</span>
                  &nbsp;| <span id="projectVersion">Version: 0.7</span>
                      </div>
            <div class="xright">                    <a href="http://mahout.apache.org/mahout-examples" class="externalLink" title="Mahout Examples">Mahout Examples</a>
              
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Apache Mahout">Apache Mahout</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                              <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
                          <a href="checkstyle.html" title="Checkstyle">Checkstyle</a>
            </li>
                      <li class="none">
            <strong>CPD Report</strong>
          </li>
                      <li class="none">
                          <a href="findbugs.html" title="FindBugs Report">FindBugs Report</a>
            </li>
                      <li class="none">
                          <a href="apidocs/index.html" title="JavaDocs">JavaDocs</a>
            </li>
                      <li class="none">
                          <a href="jira-report.html" title="JIRA Report">JIRA Report</a>
            </li>
                      <li class="none">
                          <a href="pmd.html" title="PMD Report">PMD Report</a>
            </li>
                      <li class="none">
                          <a href="surefire-report.html" title="Surefire Report">Surefire Report</a>
            </li>
                      <li class="none">
                          <a href="taglist.html" title="Tag List">Tag List</a>
            </li>
                      <li class="none">
                          <a href="testapidocs/index.html" title="Test JavaDocs">Test JavaDocs</a>
            </li>
              </ul>
        </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>CPD Results<a name="CPD_Results"></a></h2><p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 4.2.5.</p></div><div class="section"><h2>Duplications<a name="Duplications"></a></h2><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/classifier/sgd/TestASFEmail.java</td><td>105</td></tr><tr class="a"><td>org/apache/mahout/classifier/sgd/TestNewsGroups.java</td><td>93</td></tr><tr class="b"><td colspan='2'><div><pre>      ra.addInstance(newsGroups.values().get(actual), cr);

    }
    output.printf(&quot;%s\n\n&quot;, ra.toString());
  }

  boolean parseArgs(String[] args) {
    DefaultOptionBuilder builder = new DefaultOptionBuilder();

    Option help = builder.withLongName(&quot;help&quot;).withDescription(&quot;print this list&quot;).create();

    ArgumentBuilder argumentBuilder = new ArgumentBuilder();
    Option inputFileOption = builder.withLongName(&quot;input&quot;)
            .withRequired(true)
            .withArgument(argumentBuilder.withName(&quot;input&quot;).withMaximum(1).create())
            .withDescription(&quot;where to get training data&quot;)
            .create();

    Option modelFileOption = builder.withLongName(&quot;model&quot;)
            .withRequired(true)
            .withArgument(argumentBuilder.withName(&quot;model&quot;).withMaximum(1).create())
            .withDescription(&quot;where to get a model&quot;)
            .create();

    Group normalArgs = new GroupBuilder()
            .withOption(help)
            .withOption(inputFileOption)
            .withOption(modelFileOption)
            .create();

    Parser parser = new Parser();
    parser.setHelpOption(help);
    parser.setHelpTrigger(&quot;--help&quot;);
    parser.setGroup(normalArgs);
    parser.setHelpFormatter(new HelpFormatter(&quot; &quot;, &quot;&quot;, &quot; &quot;, 130));
    CommandLine cmdLine = parser.parseAndHelp(args);

    if (cmdLine == null) {
      return false;
    }

    inputFile = (String) cmdLine.getValue(inputFileOption);
    modelFile = (String) cmdLine.getValue(modelFileOption);
    return true;
  }

}</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/classifier/sgd/TrainAdaptiveLogistic.java</td><td>146</td></tr><tr class="a"><td>org/apache/mahout/classifier/sgd/TrainLogistic.java</td><td>133</td></tr><tr class="b"><td colspan='2'><div><pre>      for (int row = 0; row &lt; lr.getBeta().numRows(); row++) {
        for (String key : csv.getTraceDictionary().keySet()) {
          double weight = predictorWeight(lr, row, csv, key);
          if (weight != 0) {
            output.printf(Locale.ENGLISH, &quot;%20s %.5f\n&quot;, key, weight);
          }
        }
        for (int column = 0; column &lt; lr.getBeta().numCols(); column++) {
          output.printf(Locale.ENGLISH, &quot;%15.9f &quot;, lr.getBeta().get(row, column));
        }
        output.println();
      }
    }
  }

  private static double predictorWeight(OnlineLogisticRegression lr, int row, RecordFactory csv, String predictor) {
    double weight = 0;
    for (Integer column : csv.getTraceDictionary().get(predictor)) {
      weight += lr.getBeta().get(row, column);
    }
    return weight;
  }

  private static boolean parseArgs(String[] args) {
    DefaultOptionBuilder builder = new DefaultOptionBuilder();

    Option help = builder.withLongName(&quot;help&quot;).withDescription(&quot;print this list&quot;).create();

    Option quiet = builder.withLongName(&quot;quiet&quot;).withDescription(&quot;be extra quiet&quot;).create();</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/cf/taste/example/grouplens/GroupLensRecommender.java</td><td>51</td></tr><tr class="a"><td>org/apache/mahout/cf/taste/example/jester/JesterRecommender.java</td><td>40</td></tr><tr class="b"><td colspan='2'><div><pre>  public JesterRecommender(DataModel dataModel) throws TasteException {
    recommender = new CachingRecommender(new SlopeOneRecommender(dataModel));
  }
  
  @Override
  public List&lt;RecommendedItem&gt; recommend(long userID, int howMany) throws TasteException {
    return recommender.recommend(userID, howMany);
  }
  
  @Override
  public List&lt;RecommendedItem&gt; recommend(long userID, int howMany, IDRescorer rescorer) throws TasteException {
    return recommender.recommend(userID, howMany, rescorer);
  }
  
  @Override
  public float estimatePreference(long userID, long itemID) throws TasteException {
    return recommender.estimatePreference(userID, itemID);
  }
  
  @Override
  public void setPreference(long userID, long itemID, float value) throws TasteException {
    recommender.setPreference(userID, itemID, value);
  }
  
  @Override
  public void removePreference(long userID, long itemID) throws TasteException {
    recommender.removePreference(userID, itemID);
  }
  
  @Override
  public DataModel getDataModel() {
    return recommender.getDataModel();
  }
  
  @Override
  public void refresh(Collection&lt;Refreshable&gt; alreadyRefreshed) {
    recommender.refresh(alreadyRefreshed);
  }
  
  @Override
  public String toString() {
    return &quot;JesterRecommender[recommender:&quot; + recommender + ']';</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/cf/taste/example/kddcup/track1/Track1Recommender.java</td><td>40</td></tr><tr class="a"><td>org/apache/mahout/cf/taste/example/kddcup/track2/Track2Recommender.java</td><td>46</td></tr><tr class="b"><td colspan='2'><div><pre>    recommender = new GenericBooleanPrefItemBasedRecommender(dataModel, similarity);
  }
  
  @Override
  public List&lt;RecommendedItem&gt; recommend(long userID, int howMany) throws TasteException {
    return recommender.recommend(userID, howMany);
  }
  
  @Override
  public List&lt;RecommendedItem&gt; recommend(long userID, int howMany, IDRescorer rescorer) throws TasteException {
    return recommender.recommend(userID, howMany, rescorer);
  }
  
  @Override
  public float estimatePreference(long userID, long itemID) throws TasteException {
    return recommender.estimatePreference(userID, itemID);
  }
  
  @Override
  public void setPreference(long userID, long itemID, float value) throws TasteException {
    recommender.setPreference(userID, itemID, value);
  }
  
  @Override
  public void removePreference(long userID, long itemID) throws TasteException {
    recommender.removePreference(userID, itemID);
  }
  
  @Override
  public DataModel getDataModel() {
    return recommender.getDataModel();
  }
  
  @Override
  public void refresh(Collection&lt;Refreshable&gt; alreadyRefreshed) {
    recommender.refresh(alreadyRefreshed);
  }
  
  @Override
  public String toString() {
    return &quot;Track1Recommender[recommender:&quot; + recommender + ']';
  }
  
}</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/cf/taste/example/bookcrossing/BookCrossingBooleanRecommender.java</td><td>48</td></tr><tr class="a"><td>org/apache/mahout/cf/taste/example/bookcrossing/BookCrossingRecommender.java</td><td>47</td></tr><tr class="b"><td colspan='2'><div><pre>    recommender = new GenericUserBasedRecommender(bcModel, neighborhood, similarity);
  }
  
  @Override
  public List&lt;RecommendedItem&gt; recommend(long userID, int howMany) throws TasteException {
    return recommender.recommend(userID, howMany);
  }
  
  @Override
  public List&lt;RecommendedItem&gt; recommend(long userID, int howMany, IDRescorer rescorer) throws TasteException {
    return recommender.recommend(userID, howMany, rescorer);
  }
  
  @Override
  public float estimatePreference(long userID, long itemID) throws TasteException {
    return recommender.estimatePreference(userID, itemID);
  }
  
  @Override
  public void setPreference(long userID, long itemID, float value) throws TasteException {
    recommender.setPreference(userID, itemID, value);
  }
  
  @Override
  public void removePreference(long userID, long itemID) throws TasteException {
    recommender.removePreference(userID, itemID);
  }
  
  @Override
  public DataModel getDataModel() {
    return recommender.getDataModel();
  }
  
  @Override
  public void refresh(Collection&lt;Refreshable&gt; alreadyRefreshed) {
    recommender.refresh(alreadyRefreshed);
  }
  
  @Override
  public String toString() {
    return &quot;BookCrossingRecommender[recommender:&quot; + recommender + ']';</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/cf/taste/example/bookcrossing/BookCrossingBooleanRecommender.java</td><td>48</td></tr><tr class="a"><td>org/apache/mahout/cf/taste/example/kddcup/track1/Track1Recommender.java</td><td>40</td></tr><tr class="b"><td colspan='2'><div><pre>    recommender = new GenericItemBasedRecommender(dataModel, similarity);
  }
  
  @Override
  public List&lt;RecommendedItem&gt; recommend(long userID, int howMany) throws TasteException {
    return recommender.recommend(userID, howMany);
  }
  
  @Override
  public List&lt;RecommendedItem&gt; recommend(long userID, int howMany, IDRescorer rescorer) throws TasteException {
    return recommender.recommend(userID, howMany, rescorer);
  }
  
  @Override
  public float estimatePreference(long userID, long itemID) throws TasteException {
    return recommender.estimatePreference(userID, itemID);
  }
  
  @Override
  public void setPreference(long userID, long itemID, float value) throws TasteException {
    recommender.setPreference(userID, itemID, value);
  }
  
  @Override
  public void removePreference(long userID, long itemID) throws TasteException {
    recommender.removePreference(userID, itemID);
  }
  
  @Override
  public DataModel getDataModel() {
    return recommender.getDataModel();
  }
  
  @Override
  public void refresh(Collection&lt;Refreshable&gt; alreadyRefreshed) {
    recommender.refresh(alreadyRefreshed);
  }
  
  @Override
  public String toString() {
    return &quot;Track1Recommender[recommender:&quot; + recommender + ']';</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/cf/taste/example/bookcrossing/BookCrossingBooleanRecommender.java</td><td>48</td></tr><tr class="a"><td>org/apache/mahout/cf/taste/example/jester/JesterRecommender.java</td><td>41</td></tr><tr class="b"><td colspan='2'><div><pre>    recommender = new CachingRecommender(new SlopeOneRecommender(dataModel));
  }
  
  @Override
  public List&lt;RecommendedItem&gt; recommend(long userID, int howMany) throws TasteException {
    return recommender.recommend(userID, howMany);
  }
  
  @Override
  public List&lt;RecommendedItem&gt; recommend(long userID, int howMany, IDRescorer rescorer) throws TasteException {
    return recommender.recommend(userID, howMany, rescorer);
  }
  
  @Override
  public float estimatePreference(long userID, long itemID) throws TasteException {
    return recommender.estimatePreference(userID, itemID);
  }
  
  @Override
  public void setPreference(long userID, long itemID, float value) throws TasteException {
    recommender.setPreference(userID, itemID, value);
  }
  
  @Override
  public void removePreference(long userID, long itemID) throws TasteException {
    recommender.removePreference(userID, itemID);
  }
  
  @Override
  public DataModel getDataModel() {
    return recommender.getDataModel();
  }
  
  @Override
  public void refresh(Collection&lt;Refreshable&gt; alreadyRefreshed) {
    recommender.refresh(alreadyRefreshed);
  }
  
  @Override
  public String toString() {
    return &quot;GroupLensRecommender[recommender:&quot; + recommender + ']';</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/classifier/sgd/RunLogistic.java</td><td>94</td></tr><tr class="a"><td>org/apache/mahout/classifier/sgd/ValidateAdaptiveLogistic.java</td><td>137</td></tr><tr class="b"><td colspan='2'><div><pre>      }
      
    }
  }

  private static boolean parseArgs(String[] args) {
    DefaultOptionBuilder builder = new DefaultOptionBuilder();

    Option help = builder.withLongName(&quot;help&quot;)
        .withDescription(&quot;print this list&quot;).create();

    Option quiet = builder.withLongName(&quot;quiet&quot;)
        .withDescription(&quot;be extra quiet&quot;).create();

    Option auc = builder.withLongName(&quot;auc&quot;).withDescription(&quot;print AUC&quot;)
        .create();
    Option confusion = builder.withLongName(&quot;confusion&quot;)
        .withDescription(&quot;print confusion matrix&quot;).create();

    Option scores = builder.withLongName(&quot;scores&quot;)
        .withDescription(&quot;print scores&quot;).create();
  
    ArgumentBuilder argumentBuilder = new ArgumentBuilder();
    Option inputFileOption = builder
        .withLongName(&quot;input&quot;)
        .withRequired(true)
        .withArgument(
            argumentBuilder.withName(&quot;input&quot;).withMaximum(1)
                .create())
        .withDescription(&quot;where to get validate data&quot;).create();</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/clustering/syntheticcontrol/kmeans/Job.java</td><td>42</td></tr><tr class="a"><td>org/apache/mahout/clustering/syntheticcontrol/meanshift/Job.java</td><td>40</td></tr><tr class="b"><td colspan='2'><div><pre>public final class Job extends AbstractJob {
  
  private static final Logger log = LoggerFactory.getLogger(Job.class);
  
  private static final String DIRECTORY_CONTAINING_CONVERTED_INPUT = &quot;data&quot;;
  
  private Job() {}
  
  public static void main(String[] args) throws Exception {
    if (args.length &gt; 0) {
      log.info(&quot;Running with only user-supplied arguments&quot;);
      ToolRunner.run(new Configuration(), new Job(), args);
    } else {
      log.info(&quot;Running with default arguments&quot;);
      Path output = new Path(&quot;output&quot;);
      Configuration conf = new Configuration();
      HadoopUtil.delete(conf, output);
      run(conf, new Path(&quot;testdata&quot;), output,
          new EuclideanDistanceMeasure(), new TriangularKernelProfile(), 47.6,</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/classifier/df/BreimanExample.java</td><td>129</td></tr><tr class="a"><td>org/apache/mahout/classifier/df/mapreduce/BuildForest.java</td><td>78</td></tr><tr class="b"><td colspan='2'><div><pre>    InstantiationException, IllegalAccessException {
    
    DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
    ArgumentBuilder abuilder = new ArgumentBuilder();
    GroupBuilder gbuilder = new GroupBuilder();
    
    Option dataOpt = obuilder.withLongName(&quot;data&quot;).withShortName(&quot;d&quot;).withRequired(true)
        .withArgument(abuilder.withName(&quot;path&quot;).withMinimum(1).withMaximum(1).create())
        .withDescription(&quot;Data path&quot;).create();
    
    Option datasetOpt = obuilder.withLongName(&quot;dataset&quot;).withShortName(&quot;ds&quot;).withRequired(true)
        .withArgument(abuilder.withName(&quot;dataset&quot;).withMinimum(1).withMaximum(1).create())
        .withDescription(&quot;Dataset path&quot;).create();
    
    Option selectionOpt = obuilder.withLongName(&quot;selection&quot;).withShortName(&quot;sl&quot;).withRequired(false)</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/classifier/sgd/TrainASFEmail.java</td><td>117</td></tr><tr class="a"><td>org/apache/mahout/classifier/sgd/TrainNewsGroups.java</td><td>134</td></tr><tr class="b"><td colspan='2'><div><pre>    ModelSerializer.writeBinary(&quot;/tmp/news-group.model&quot;,
            learningAlgorithm.getBest().getPayload().getLearner().getModels().get(0));

    List&lt;Integer&gt; counts = Lists.newArrayList();
    System.out.printf(&quot;Word counts\n&quot;);
    for (String count : overallCounts.elementSet()) {
      counts.add(overallCounts.count(count));
    }
    Collections.sort(counts, Ordering.natural().reverse());
    k = 0;
    for (Integer count : counts) {
      System.out.printf(&quot;%d\t%d\n&quot;, k, count);
      k++;
      if (k &gt; 1000) {
        break;
      }
    }</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/classifier/sgd/RunLogistic.java</td><td>108</td></tr><tr class="a"><td>org/apache/mahout/classifier/sgd/TestNewsGroups.java</td><td>102</td></tr><tr class="b"><td colspan='2'><div><pre>    Option help = builder.withLongName(&quot;help&quot;).withDescription(&quot;print this list&quot;).create();

    ArgumentBuilder argumentBuilder = new ArgumentBuilder();
    Option inputFileOption = builder.withLongName(&quot;input&quot;)
            .withRequired(true)
            .withArgument(argumentBuilder.withName(&quot;input&quot;).withMaximum(1).create())
            .withDescription(&quot;where to get training data&quot;)
            .create();

    Option modelFileOption = builder.withLongName(&quot;model&quot;)
            .withRequired(true)
            .withArgument(argumentBuilder.withName(&quot;model&quot;).withMaximum(1).create())
            .withDescription(&quot;where to get a model&quot;)
            .create();

    Group normalArgs = new GroupBuilder()
            .withOption(help)
            .withOption(inputFileOption)</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/apache/mahout/classifier/sgd/TrainAdaptiveLogistic.java</td><td>346</td></tr><tr class="a"><td>org/apache/mahout/classifier/sgd/TrainLogistic.java</td><td>282</td></tr><tr class="b"><td colspan='2'><div><pre>    TrainLogistic.passes = getIntegerArgument(cmdLine, passes);

    return true;
  }

  private static String getStringArgument(CommandLine cmdLine, Option inputFile) {
    return (String) cmdLine.getValue(inputFile);
  }

  private static boolean getBooleanArgument(CommandLine cmdLine, Option option) {
    return cmdLine.hasOption(option);
  }

  private static int getIntegerArgument(CommandLine cmdLine, Option features) {
    return Integer.parseInt((String) cmdLine.getValue(features));
  }

  private static double getDoubleArgument(CommandLine cmdLine, Option op) {
    return Double.parseDouble((String) cmdLine.getValue(op));
  }

  public static OnlineLogisticRegression getModel() {</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                    2008-2012
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.      
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
